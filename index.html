<!DOCTYPE html>
<html>
<head>
	<title>Facebook Custom Tab App</title>
	<style type="text/css">
	body, html {
		width: 100%;
		height: 100%;
		padding: 0;
		margin: 0;
		background: #efefef;
		font-family: ;
		font-size: 1rem;
		color: white;
	}

	body {
		font-family: Helvetica, Arial, sans;
	}

	* {
		position: relative;
		box-sizing: border-box;;
	}

	.button-large {
		background: #48649F;
		cursor: pointer;
		color: white;
		top: 20px;
		text-transform: uppercase;
		font-weight: 700;
		box-shadow: 0 -12px 0 rgba(0, 0, 0, 0.3) inset;
		-webkit-transition-property: box-shadow font-size;
		-webkit-transition-duration: 0.2s;
		-webkit-transition-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1.275);
	}
	input[type=text] {
		background: #fff;
		position: relative;
	}
	label {
		display: block;
	}
	.form_section {
		display: block;
		margin-bottom: 10px;
	}
	.form_item {
		height: 30px;
		margin: 0;
		padding: 2rem;
		width: 100%;
		display: block;
		-webkit-appearance: none;
		border: none;
		outline: none;
		box-sizing: border-box;
		font-size: 100%;
		position: relative;
	}
	.form {
		width: 100%;
	}

	.has-shadow {
		box-shadow: 0 -4px 0 rgba(0, 0, 0, 0.1) inset;
		-webkit-transition-property: box-shadow font-size;
		-webkit-transition-duration: 0.2s;
		-webkit-transition-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1.275);
	}
	.has-shadow:focus {
		box-shadow: 0 -6px 0 rgba(0, 0, 0, 0.5) inset;
	}
	.button-large:hover {
		box-shadow: 0 -6px 0 rgba(0, 0, 0, 0.5) inset;
		padding-top: 38px;
	}
	input[type=text] + label {
		position: absolute;
		display: block;
		right: -64px;
		top: 24px;
		width: 40px;
		height: 40px;
		-webkit-transition-property: top;
		-webkit-transition-duration: 0.3s;
		-webkit-transition-timing-function: cubic-bezier(0.505, 0.715, 0.530, 0.890);
	}
	input[type=text] + label:after,
	input[type=text] + label:before {
		color: white;
		display: block;
		width: 100%;
		height: 100%;
		position: absolute;
		font-size: 300%;
		opacity: 0;
		top: -10px;
		text-align: center;
		vertical-align: middle;
		content: "";
		-webkit-transform: scale(0.1);
		-webkit-transition-property: opacity color -webkit-transform;
		-webkit-transition-duration: 0.3s;
		-webkit-transition-timing-function: cubic-bezier(0.680, -0.550, 0.265, 1.550); 
	}
	input[type=text].has-error + label:after {
		content: "\2717";
		opacity: 1;
		color: #DF6C4F;
		-webkit-transform: scale(1);
	}
	input[type=text].is-valid + label:before {
		opacity: 1;
		color: #3C948B;
		content: "\2714";
		-webkit-transform: scale(1);
	}
	input[type=text].is-valid + label:before,
	input[type=text].has-error + label:after {
		/*top: 100px;*/
	}

	.l-main {
		max-width: 40rem;
		margin: 0 auto 240px auto;
		padding-top: 120px;
	}

	.linky {
		position: absolute;
		z-index: 1000;
		width: 48px;
		height: 48px;
		top: 30px;
		right: 30px;
		overflow: hidden;
		text-decoration: none;
		font-size: 200%;
	}
	.linky_bg {
		width: 48px;
		height: 48px;
		border: 3px solid rgba(72, 100, 159, 0.9);
		box-sizing: border-box;
		-webkit-transition-property: border-width border-color;
		-webkit-transition-duration: 0.15s;
		-webkit-transition-timing-function: cubic-bezier(0.505, 0.715, 0.530, 0.890);
		position: absolute;
	}
	.linky_label {
		position: relative;
		color: rgba(72, 100, 159, 1);
		line-height: 48px;
		text-align: center;
		vertical-align: middle;
	}
	.linky:hover {
		border-width: 4px;
	}
	.linky:hover .linky_label {
		color: #efefef;
		-webkit-transform: scale(0.7);
		-webkit-transition-property: -webkit-transform color;
		-webkit-transition-duration: 0.4s;
		-webkit-transition-delay: 0.1s;
		-webkit-transition-timing-function: cubic-bezier(0.075, 0.820, 0.165, 1.000);
	}
	.linky:hover .linky_bg {
		border-bottom-width: 48px;
		border-color: rgba(72, 100, 159, 1);
	}

	.headline {
		position: absolute;
		top: 30px;
		left: 30px;
		font-weight: 700;
		font-size: 100%;
		text-align: center;
		width: auto;
		display: inline-block;
		padding: 12px 10px;
		border: 3px solid rgba(0, 0, 0, 0.05);
		color: rgba(0, 0, 0, 0.6);
		-webkit-user-select: none;
		cursor: default;
	}

	.info {
		display: block;
		clear: both;
		position: relative;
		top: 50px;
		color: #666;
		line-height: 140%;
		text-align: center;
	}
	p {
		margin-bottom: 5px;
		margin-top: 5px;
	}
	a {
		text-decoration: none;
		color: #48649F;
	}

	@media screen and (min-width: 320px) {
		.l-main {
			padding-top: 180px;
			max-width: 21rem;
		}
		.form_item {
			font-size: 100%;
		}
	}
	@media screen and (min-width: 540px) {
		.l-main {
			max-width: 30rem;
		}
		.form_item {
			height: 90px;
			font-size: 120%;
		}
	}
	@media screen and (min-width: 800px) {
		.l-main {
			max-width: 42rem;
		}
		.form_item {
			font-size: 140%;
		}
	}
	</style>
</head>
<body>
	<a href="http://blog.hubspot.com/blog/tabid/6307/bid/26330/How-to-Create-Custom-Tabs-for-Facebook-Business-Pages.aspx" target="_blank" class="linky">
		<div class="linky_bg"></div>
		<div class="linky_label">?</div>
	</a>
	<div class="headline">[app]</div>

	
	<form class="l-main">

		<div class="form">
			<div class="form_section">
				<input type="text" id="appIDInput" class="form_item has-shadow" autocomplete="off" placeholder="Facebook App ID" required="required" pattern="^[0-9]+$" />
				<label for="appIDInput"></label>
			</div>
			<div class="form_section">
				<input type="text" id="siteURLInput" class="form_item has-shadow" autocomplete="off" placeholder="Facebook page site URL" required="required" pattern="^(http|https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$" />
				<label for="siteURLInput"></label>
			</div>
		</div>
		<button id="submitButton" class="form_item button-large">#yolo</button>

		<div class="info">
			<p>This will add your Facebook app to your Facebook page tab</p>
			<p><a href="http://blog.hubspot.com/blog/tabid/6307/bid/26330/How-to-Create-Custom-Tabs-for-Facebook-Business-Pages.aspx" target="_blank">#mehfacebook</a></p>
		</div>
	</form>

	<script type="text/javascript">
		window.addEventListener('load', function(){
			var urlHolder = document.getElementById('urlHolder');
			var button = document.getElementById('submitButton');
			var appIDInput = document.getElementById('appIDInput');
			var urlInput = document.getElementById('siteURLInput');

			var baseURL = 'http://www.facebook.com/dialog/pagetab?app_id=';
			var urlNextPrefix = '&amp;next=';

			var self = this;

			var onSubmit = function(e) {
				e.preventDefault();

				if(!!validateTextInput.call(appIDInput) && !!validateTextInput.call(siteURLInput)) {
					openURL();
				}
			};

			var openURL = function() {
				var url = baseURL + appIDInput.value + urlNextPrefix + urlInput.value;
				window.open(url);
			};

			appIDInput.addEventListener('keyup', function(e){
				inValidateTextInput.call(e.currentTarget);
				validateTextInput.call(e.currentTarget);
			});
			appIDInput.addEventListener('change', function(e){
				validateTextInput.call(e.currentTarget);
			});

			urlInput.addEventListener('keyup', function(e){
				inValidateTextInput.call(e.currentTarget);
				validateTextInput.call(e.currentTarget);
			});
			urlInput.addEventListener('change', function(e){
				validateTextInput.call(e.currentTarget);
			});

			var inValidateTextInput = function() {
				var field = this;

				if(field.value.length === 0) {
					field.className = field.className.replace(' has-error', '');
					field.className = field.className.replace(' is-valid', '');					
				}
			};

			var validateTextInput = function() {
				var field = this;
				var pattern = field.getAttribute('pattern');
				var isValid = true;

				field.className = field.className.replace(' has-error', '');
				field.className = field.className.replace(' is-valid', '');

				if(field.value.length === 0) {
					isValid = false;
				}

				if(!!!field.value.match(pattern)) {
					if(field.value.length > 0) {
						field.className += ' has-error';
						isValid = false;
					}
				} else if (field.value.length > 0) {
					field.className += ' is-valid';
				}

				return isValid;
			};

			button.addEventListener('click', onSubmit);
		});
	</script>
</body>
</html>